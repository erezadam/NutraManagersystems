# Overview

## מטרת המערכת
מערכת ניהול ידע לתוספי תזונה, תסמיני חסר, מזונות, פרוטוקולי טיפול ומאמרים. המערכת תומכת CRUD מלא, חיפוש רוחבי, יבוא/יצוא, ושימוש ב-AI להשלמת מידע.

## מטרות עסקיות
- לרכז ידע קליני ותזונתי במקום אחד
- לקשר בין תוספים, תסמינים, מזונות ופרוטוקולים
- לאפשר עבודה מהירה של אנשי תוכן/מטפלים
- לאפשר גיבוי נתונים וייצוא לצרכי המשכיות

## משתמשים ותפקידים
- `admin`: כל היכולות, כולל ניהול משתמשים וגיבוי מערכת
- `user`: ניהול תוכן (CRUD ישויות תוכן), ללא ניהול משתמשים וללא גיבוי

## תחומי פונקציונליות עיקריים
- ניהול תוספים (`Vitamins` + `VitaminEdit`)
- טופס תופעות ומקרים (`EffectsCases`)
- ניהול תסמיני חסר (`DeficiencySymptoms`)
- ניהול מזונות (`Foods`)
- ניהול פרוטוקולים (`Diseases` + `DiseaseEdit`)
- ניהול מאמרים (`Articles` + `ArticleEdit`)
- חיפוש רוחבי (`GlobalSearch`)
- ניהול משתמשים (`UserManagement`, admin)

## כללי UX גלובליים לטפסים
- מסכי תצוגה (לא עריכה):
  - ערך טקסט ארוך מקוצר ל-2 שורות לכל היותר
  - אם יש גלישה, מוצג סימון וניתן ללחוץ לפתיחת פופ-אפ עם תוכן מלא
  - לחיצה חוזרת על אותו שדה סוגרת את הפופ-אפ
- מסכי עריכה:
  - שדות טקסט חופשי עובדים בעורך עשיר בסיסי (הדגשה, נטוי, קו תחתון, צבע, רשימה)
  - שדות טקסט מתרחבים אוטומטית לפי התוכן (ללא צורך בגלילה פנימית)
  - הכלל חל על כל מסכי העריכה הראשיים והמודלים של יצירה/עריכה
- שדות בחירה (Select / Multi-Select):
  - ברירת המחדל היא מצב סגור
  - לחיצה על שורת החיפוש פותחת את הרשימה
  - בתוך הרשימה ניתן גם לחפש וגם לסמן ערכים

## זרימות עיקריות
1. יצירה/עריכה של תוסף, עם שיוך לתסמינים ומזונות
2. עריכת תסמין וסנכרון דו-כיווני מול מזונות
3. יצירת/עריכת פרוטוקול עם תוספים, תסמינים וקישורי מוצרים
4. יבוא/יצוא נתונים פר ישות
5. גיבוי מערכת מלא (admin)

## מקורות אמת
- מסמך מיפוי קיים: `supplement-app-system-docs.md`
- API שנבדק: `Base44 entities`

## גבולות גרסה (Rewrite Scope)
- שמירת התנהגות פונקציונלית קיימת
- שמירת שמות ישויות ושדות קיימים
- שמירת מפת ניווט קיימת
- שמירת פורמטי יבוא/יצוא קיימים
- שמירת כללי הרשאות קיימים

## הנחות
- תיקיית `Screens` טרם סופקה בפועל בפרויקט
- המיפוי הקיים מייצג נאמנה את המערכת הפעילה

## סיכונים
- ללא צילומי מסך, יתכנו פערי UI/UX ברמת פיקסל
- חלק מהלוגיקות מסתמכות על שדות legacy (למשל flatten ב-Vitamin)
- חלק מההרשאות נאכפות ב-UI ולא בשרת

## קריטריון השלמה למסמך
- כל מסך, ישות, הרשאה וזרימה ראשית מכוסים
- כל הנחה מסומנת במפורש
