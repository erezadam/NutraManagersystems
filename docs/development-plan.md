# Development Plan (Stage 5)

## יעד
Rewrite מלא למערכת תוך שימור התנהגות קיימת, לפי docs/ ו-skill.

## שלבים עם קריטריון קבלה מדיד

### שלב A: Shell וראוטינג (נבחר כשלב ראשון)
- תכולה:
  - יצירת Layout בסיסי
  - ראוטינג לכל המסכים הידועים
  - fallback 404
- קריטריון קבלה:
  - ניווט ל-11 מסכים עובד
  - `/` מפנה ל-`/Vitamins`
  - בדיקות `lint`, `test`, `build`, `test:ui` עוברות
- סטטוס: הושלם

### שלב B: Data Access Layer + Contracts
- תכולה:
  - שירותי גישה לישויות
  - טיפוסים מלאים לכל ישות
  - עטיפת שגיאות אחידה
- קריטריון קבלה:
  - כל הישויות מכוסות בטיפוסים
  - כל קריאה/כתיבה משתמשת בשירות אחיד
  - unit tests לשירותים (מינימום 1 לכל ישות)
- סטטוס: הושלם

### שלב C: Screens Skeleton to Functional
- תכולה:
  - חיבור כל מסך לפעולות read/list
  - מצבי loading/error אחידים
- קריטריון קבלה:
  - כל המסכים מציגים נתונים חיים
  - אין קריסות מעבר בין מסכים
- סטטוס: הושלם

### שלב D: CRUD מלא לכל ישות
- תכולה:
  - יצירה/עדכון/מחיקה לישויות התוכן
  - invalidation cache אחיד
- קריטריון קבלה:
  - CRUD לכל ישות עובד ידנית + unit tests מרכזיים
- סטטוס: הושלם (כיסוי ישויות תוכן + ניהול משתמשים)

### שלב E: Import/Export + Backup
- תכולה:
  - חוזים מלאים לפורמטים
  - דוחות added/skipped
- קריטריון קבלה:
  - כל פורמט נתמך נבדק לפחות פעם אחת
  - בדיקות parse ותיקוף עבור קבצים לא תקינים
- סטטוס: הושלם (JSON/CSV + גיבוי מערכת ב-Layout)

### שלב F: AI + Sync Logic
- תכולה:
  - נקודות AI
  - סנכרון דו-כיווני תסמין/מזון + תוסף/תסמין
- קריטריון קבלה:
  - sync passes manual checklist
  - שגיאות AI מוצגות למשתמש
- סטטוס: הושלם חלקית (AI ב-Vitamins וב-DeficiencySymptoms; sync דו-כיווני מיושם)

### שלב G: Permissions Hardening
- תכולה:
  - אכיפת הרשאות גם בשרת
- קריטריון קבלה:
  - user לא יכול לבצע פעולות admin גם ב-API ישיר
- סטטוס: הושלם חלקית (Guard UI + הסתרת ניווט admin; נדרשת אכיפת שרת)

### שלב H: Hardening וייצוב
- תכולה:
  - רגרסיה, ביצועים, polish
- קריטריון קבלה:
  - smoke מלא עובר
  - כל tests בירוק ב-CI
- סטטוס: הושלם (lint/test/build/test:ui בירוק מקומית)

## השלב הראשון הקטן שנבחר
שלב A: Shell וראוטינג.

## הערה
- סטטוס זה מבוסס על היישום הקיים בספריית `src/` נכון ל-2026-02-21.
- קשיחות הרשאות שרת נשארת משימת חיזוק אחרונה לפני הפעלה פרודקשן.
