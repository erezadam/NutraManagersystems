# Decisions Log

| תאריך | החלטה | סיבה | חלופות שנבחנו | השפעה |
|---|---|---|---|---|
| 2026-02-20 | להשתמש ב-`supplement-app-system-docs.md` כמקור אמת זמני | זה הנכס המלא היחיד שקיים בפועל | להמתין לצילומי מסך | מאפשר להתקדם בתכנון ללא חסימה |
| 2026-02-20 | לשמר שמות ישויות ושדות כפי שהם | תאימות מלאה לנתונים קיימים | שינוי סכמות ב-rewrite | מפחית סיכון לשבירת import/export וקשרים |
| 2026-02-20 | לתעד במפורש הנחות וסיכונים בכל מסמך | אין כרגע תיקיית `Screens` לאימות חזותי | להניח שהכל ודאי | שקיפות והקטנת הפתעות בשלב פיתוח |
| 2026-02-20 | להגדיר RBAC קשיח כיעד ל-rewrite | כיום אכיפה חלקית ב-UI בלבד | להשאיר מצב קיים | שיפור אבטחה וציות להרשאות |
| 2026-02-20 | להמשיך עם יחידות עבודה קצרות ומדידות | נדרש לפי הנחיות הפרויקט | משימות גדולות לא מדידות | שליטה באיכות וקצב מסירה |
| 2026-02-20 | לקבע תהליך חובה: תכנון -> יישום -> בדיקות -> עדכון מסמכים | אחידות ואמינות צוותית | תהליך אד-הוק | מונע drift בין קוד למסמכים |
| 2026-02-20 | שלב פיתוח ראשון יהיה שלד ראוטינג מלא למסכים | מאפשר התקדמות מדידה עם סיכון נמוך | להתחיל ישר ב-CRUD מלא | מייצר בסיס יציב לפיתוח הדרגתי |
| 2026-02-20 | לתעד תוכנית פיתוח רב-שלבית בקובץ ייעודי | ליישר ציפיות וקריטריוני קבלה מדידים | לנהל תוכנית רק בצ'אט | מקור אמת משותף להתקדמות הפרויקט |
| 2026-02-21 | להחליף את ה-UI הבסיסי במערכת עיצוב מובנית (טיפוגרפיה, ניווט, grid cards, אנימציות) | שיפור חוויית משתמש וקריאות במובייל/דסקטופ | להשאיר HTML בסיסי עד חיבור לוגיקה | מפחית חיכוך עבודה ומכין תשתית למסכים פונקציונליים |
| 2026-02-21 | לממש CRUD ו-Import/Export בכל מסכי הליבה לפני פוליש נוסף | סגירת פער פונקציונלי מול כל המסכים המתועדים | פיתוח מדורג של מסך-מסך ללא שיתופי קוד | המערכת חזרה להתנהגות תפעולית רחבה עם פחות stubs |
| 2026-02-21 | לממש סנכרון דו-כיווני בשדות קשר (`Vitamin<->Symptom`, `Symptom<->Food`) בזמן שמירה/מחיקה | עקביות נתונים בין רשימות וקישורים | סנכרון ידני רק בכלי מיגרציה | מפחית drift בקשרים ומיישר ל-workflows |
| 2026-02-21 | להפעיל Guard admin במסך משתמשים ולהסתיר ניווט admin למשתמש רגיל | צמצום חשיפה לפעולות רגישות בצד לקוח | להשאיר גישה גלויה לכל המשתמשים | שיפור אבטחה תפעולית, עם צורך בהקשחת שרת בהמשך |
| 2026-02-21 | לקבוע כלל UX רוחבי: טקסט תצוגה נחתך ל-2 שורות עם פופ-אפ, ושדות עריכה עוברים לעורך עשיר מתרחב | אחידות קריאה ושימושיות במסכים עמוסי תוכן | להמשיך עם `textarea` קבועה והצגת טקסט מלא בשורות ארוכות | שיפור שימושיות, הפחתת עומס חזותי, ושמירת נגישות לתוכן מלא בלחיצה |
| 2026-02-21 | לקבוע כלל UX רוחבי לשדות בחירה: ברירת מחדל סגורה, פתיחה בלחיצה על שורת חיפוש, וחיפוש+סימון בתוך הרשימה | אחידות עבודה בשדות בחירה וצמצום עומס במסכי עריכה | רשימה פתוחה קבועה בכל מצב | שיפור שימושיות במסכים מורכבים ושמירה על התנהגות עקבית |
| 2026-02-21 | להוסיף מסך `EffectsCases` כטופס קשרים רוחבי בין ישויות | צורך עבודה מרוכזת בתרחישי תופעות ומקרים עם קפיצה לפרטי ישויות נבחרות | להישאר עם בחירות מפוזרות במסכים נפרדים | מאפשר עבודה מהירה על צירופים בין ישויות וצפייה בפרטים בלי לצאת מהטופס |
| 2026-02-21 | לקבע אחידות toolbar במסכי ניהול (חיפוש -> חדש -> יצוא JSON -> יצוא CSV -> יבוא) | עקביות UI בין מסכים והפחתת בלבול משתמשים במעברים בין מודולים | התאמה נקודתית לכל מסך ללא סטנדרט | משפר למידה, מקטין טעויות שימוש, ומקל תחזוקה |
| 2026-02-22 | לאחד את שדות מחסור מעבדה בטופס תוספים לשדה יעד יחיד `labTestDeficiency` עם מיזוג legacy בזמן קריאה | דרישת עסקית להסרת שדות כפולים תוך שמירת כל המידע ההיסטורי | מחיקת שדות מיידית ללא מיזוג | מונע אובדן מידע ומאפשר מעבר הדרגתי לסכמת תצוגה/עריכה אחידה |
| 2026-02-22 | תיקון יעד אחסון לאיחוד מחסור מעבדה: `labTestDeficiencyDetails` במקום `labTestDeficiency` | בסכמת השרת הנוכחית `labTestDeficiency` אינו persisted ולכן נדרש יעד קיים בפועל | יצירת שדה חדש בשרת או השארת פיצול שדות | מבטיח שמירה יציבה של מידע מאוחד ללא תלות בשינוי schema backend |
| 2026-02-22 | לאמץ Firebase כבסיס נתונים ויעד פריסה בענן (Firestore + Hosting + Storage) ללא ספק נתונים נוסף | דרישת מוצר לפריסה בענן בשליטה מלאה ועצמאות ספק | מעבר מדורג עם ספק נוסף | מפשט ארכיטקטורה ומפחית סיכון drift בין מקורות נתונים |

## החלטות פתוחות
- אימות UI מול צילומי מסך אמיתיים (חסר כרגע)
- בחירת מנגנון פריסה יעד (hosting environment)
